<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevOps Utility Hub | L√≥czi L√°szl√≥</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --bg: #0f172a; --panel: #1e293b; --accent: #38bdf8; --text: #f1f5f9; --code: #22c55e; }
        body { background: var(--bg); color: var(--text); font-family: 'JetBrains Mono', monospace; margin: 0; padding: 20px; }
        
        .header { text-align: center; margin-bottom: 40px; border-bottom: 1px solid #334155; padding-bottom: 20px; }
        .header h1 { color: var(--accent); margin: 0; }
        .back-link { color: #94a3b8; text-decoration: none; font-size: 0.9rem; }
        
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto; }
        
        .card { background: var(--panel); border: 1px solid #334155; border-radius: 8px; padding: 20px; display: flex; flex-direction: column; }
        .card h2 { margin-top: 0; font-size: 1.2rem; display: flex; align-items: center; gap: 10px; color: var(--accent); }
        .card-desc { font-size: 0.8rem; color: #94a3b8; margin-bottom: 15px; }
        
        .input-group { margin-bottom: 15px; }
        input, textarea, select { width: 100%; background: #0f172a; border: 1px solid #475569; color: white; padding: 8px; border-radius: 4px; box-sizing: border-box; font-family: inherit; }
        textarea { height: 80px; resize: vertical; }
        
        button { background: var(--accent); color: #0f172a; border: none; padding: 10px; border-radius: 4px; cursor: pointer; font-weight: bold; width: 100%; transition: 0.3s; }
        button:hover { opacity: 0.9; }
        
        .output-box { background: #000; color: var(--code); padding: 15px; border-radius: 4px; margin-top: 15px; font-size: 0.8rem; white-space: pre-wrap; overflow-x: auto; min-height: 50px; border-left: 3px solid var(--accent); }
        
        .badge { display: inline-block; padding: 2px 8px; border-radius: 4px; font-size: 0.7rem; background: #334155; margin-right: 5px; }
    </style>
</head>
<body>

<div class="header">
    <a href="index.html" class="back-link">&larr; Vissza a Portf√≥li√≥ra</a>
    <h1><i class="fas fa-tools"></i> DevOps Utility Hub</h1>
    <p>Val√≥s idej≈± gener√°torok √©s eszk√∂z√∂k Node.js Backenddel</p>
</div>

<div class="grid">

    <div class="card">
        <h2><i class="fas fa-lock"></i> PKI Certificate Generator</h2>
        <p class="card-desc">Node.js <code>node-forge</code> k√∂nyvt√°rral gener√°l val√≥s RSA kulcsot √©s X.509 tan√∫s√≠tv√°nyt.</p>
        <div class="input-group">
            <input type="text" id="pki-domain" placeholder="Domain n√©v (pl. myapp.local)" value="loczidity.local">
        </div>
        <button onclick="runTool('pki')">Gener√°l√°s (RSA 2048 bit)</button>
        <div class="output-box" id="out-pki">V√°rakoz√°s...</div>
    </div>

    <div class="card">
        <h2><i class="fas fa-dharmachakra"></i> Helm to K8s Engine</h2>
        <p class="card-desc">Bemeneti √©rt√©kekb≈ël (Values) gener√°l valid Kubernetes Deployment YAML-t a <code>js-yaml</code> seg√≠ts√©g√©vel.</p>
        <div class="input-group">
            <input type="text" id="helm-app" placeholder="App neve" value="nginx-web">
            <input type="number" id="helm-replica" placeholder="Replicas" value="3" style="margin-top:5px;">
        </div>
        <button onclick="runTool('helm')">Manifest Renderel√©se</button>
        <div class="output-box" id="out-helm">YAML kimenet helye...</div>
    </div>

    <div class="card">
        <h2><i class="fas fa-server"></i> Nginx Configurator</h2>
        <p class="card-desc">Reverse Proxy konfigur√°ci√≥ gener√°l√°sa biztons√°gi fejl√©cekkel √©s proxy_pass logik√°val.</p>
        <div class="input-group">
            <input type="text" id="nginx-domain" placeholder="Server Name" value="api.loczidity.me">
            <input type="text" id="nginx-upstream" placeholder="Upstream URL" value="http://localhost:3000" style="margin-top:5px;">
        </div>
        <button onclick="runTool('nginx')">Config Gener√°l√°sa</button>
        <div class="output-box" id="out-nginx">nginx.conf...</div>
    </div>

    <div class="card">
        <h2><i class="fas fa-network-wired"></i> Network Resolver</h2>
        <p class="card-desc">A Lambda Linux k√∂rnyezet√©nek h√°l√≥zati stackj√©t (TCP/IP, DNS) haszn√°lja felold√°sra.</p>
        <div class="input-group">
            <input type="text" id="net-host" placeholder="Hostname" value="amazon.com">
        </div>
        <button onclick="runTool('network')">DNS Lookup (Node.js)</button>
        <div class="output-box" id="out-network">IP c√≠m...</div>
    </div>

    <div class="card" style="grid-column: 1 / -1;">
        <h2><i class="fab fa-docker"></i> Dockerfile Validator (CI/CD Check)</h2>
        <p class="card-desc">Elemzi a kont√©ner defin√≠ci√≥t √©s Jenkins Pipeline tippeket ad.</p>
        <div class="input-group">
            <textarea id="docker-content">
FROM ubuntu:latest
RUN apt-get update && apt-get install python3
CMD ["python3", "app.py"]</textarea>
        </div>
        <button onclick="runTool('docker')">Valid√°l√°s & CI/CD Tippek</button>
        <div class="output-box" id="out-docker">Analysis...</div>
    </div>

</div>

<script>
const API_URL = "A_TE_UJ_LAMBDA_URL_CIMED"; 

async function runTool(type) {
    const out = document.getElementById(`out-${type}`);
    out.innerText = "Processing on AWS Lambda...";
    out.style.color = "#fbbf24"; // S√°rga bet√∂lt√©s alatt

    let payload = { action: type };

    // Adatok gy≈±jt√©se a formokb√≥l
    if (type === 'pki') payload.domain = document.getElementById('pki-domain').value;
    if (type === 'helm') {
        payload.appName = document.getElementById('helm-app').value;
        payload.replicas = document.getElementById('helm-replica').value;
    }
    if (type === 'nginx') {
        payload.domain = document.getElementById('nginx-domain').value;
        payload.upstream = document.getElementById('nginx-upstream').value;
    }
    if (type === 'network') payload.host = document.getElementById('net-host').value;
    if (type === 'docker') payload.content = document.getElementById('docker-content').value;

    try {
        const res = await fetch(API_URL, {
            method: 'POST',
            body: JSON.stringify(payload)
        });
        const data = await res.json();

        // Form√°zott kimenet megjelen√≠t√©se
        if (type === 'pki') {
            out.innerText = `-----BEGIN PRIVATE KEY-----\n${data.privateKey.substring(0, 50)}...\n-----END PRIVATE KEY-----\n\n${data.certificate}`;
        } else if (type === 'helm') {
            out.innerText = data.yaml;
        } else if (type === 'nginx') {
            out.innerText = data.config;
        } else if (type === 'network') {
            out.innerText = `Resolved IP: ${data.resolvedIp}\nFamily: ${data.family}\nSource: AWS Lambda Resolver`;
        } else if (type === 'docker') {
            let msg = data.valid ? "‚úÖ VALID DOCKERFILE\n" : "‚ö†Ô∏è ISSUES FOUND:\n";
            data.issues.forEach(i => msg += ` - ${i}\n`);
            msg += `\nüí° CI/CD TIPP: ${data.ci_cd_advice}`;
            out.innerText = msg;
            out.style.color = data.valid ? "#22c55e" : "#ef4444";
            return;
        }
        
        out.style.color = "#22c55e"; // Sikeres z√∂ld

    } catch (err) {
        out.innerText = "Error: " + err.message;
        out.style.color = "#ef4444";
    }
}
</script>

</body>
</html>